# synthsniff üîç‚úçÔ∏è

A super‚Äëlight CLI that sniffs text files for "AI‚Äëish" markers-smart quotes, em‚Äëdashes, `---` markdown rules, non‚Äëbreaking spaces, etc.  
Perfect for pre‚Äëcommit hooks or CI to flag autogenerated copy.

## Quick start

```bash
# build & install the latest binary
go install github.com/JoobyPM/synthsniff/cmd/sniff4ai@latest

# scan the current directory (recursively)
sniff4ai .
```

Sample output:

```
üö® docs/faq.md  (score 6)
```

Clean trees get a happy tick:

```
‚úÖ No AI smell detected in 57 file(s)
```

## Flags you'll actually use

| flag                                 | purpose                                                       |
| ------------------------------------ | ------------------------------------------------------------- |
| `-v`                                 | show counts per rule for **smelly** files                     |
| `-vv`                                | show **all** files with rule breakdown                        |
| `-vvv`                               | show all files & every rule field (incl. names, descriptions) |
| `-json`                              | machine‚Äëreadable output (pipe into `jq`)                      |
| `-ci`                                | exit 1 if any file crosses the threshold (default 3)          |
| `-t N` or env `SYNTHSNIFF_THRESHOLD` | change threshold                                              |
| `-dict rules.yml`                    | merge your own patterns & weights                             |

## Custom rules (fine‚Äëtuning)

Each rule supports extra knobs; all are optional.

```yaml
- name: MermaidFence                # short ID used in -vv/-vvv
  pattern: "```mermaid"             # matcher (required)
  weight: 3                         # score multiplier (required)

  minCount: 2                       # require ‚â• 2 hits before it scores
  minPercent: 1.0                   # ‚Ä¶or ‚â• 1 % of tokens/bytes
  description: "Markdown mermaid diagram fence"
  exts: [md, markdown]              # restrict to these extensions
```

### Minimal example

```yaml
# rules.yml
- name: IdeographicSpace
  pattern: "\u3000"   # full‚Äëwidth space
  weight: 2
```

```bash
sniff4ai -dict rules.yml src/
```

## CI snippet

```bash
sniff4ai -ci -json ./src | jq '.[] | select(.smelly)'
```

If any smelly file appears, the command exits with status 1-ideal for GitHub Actions or other pipelines.

Licensed under [**MIT**](LICENSE).  
Contributions welcome-please stick to the [Uber Go Style Guide](https://github.com/uber-go/guide/blob/master/style.md).